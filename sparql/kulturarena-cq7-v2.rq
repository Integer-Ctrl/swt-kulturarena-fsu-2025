PREFIX ex: <http://example.org/kulturarena/>

SELECT 	?year
    ((COUNT(DISTINCT ?female) * 100.0) / COUNT(DISTINCT ?person) AS ?femalePercent)
    ((COUNT(DISTINCT ?male) * 100.0) / COUNT(DISTINCT ?person) AS ?malePercent)
WHERE {
  ?concert ex:hasMusicAct ?musicAct ;
           ex:concertDate ?year .
  
  ?musicAct ex:hasMember ?person .

  # Gender classification via OPTIONAL
  OPTIONAL {
    ?person ex:hasGender ex:Female .
    BIND(?person AS ?female)
  }
  OPTIONAL {
    ?person ex:hasGender ex:Male .
    BIND(?person AS ?male)
  }
}
GROUP BY ?year
ORDER BY ?year